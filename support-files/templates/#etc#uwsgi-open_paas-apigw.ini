[uwsgi]
http = __LAN_IP__:8005
pidfile2 = __BK_HOME__/logs/open_paas/apigw_uwsgi.pid
logto2 = __BK_HOME__/logs/open_paas/apigw_uwsgi.log

logdate = true
log-format = [%(addr)] [%(ctime)] [%(method)] [%(uri)] [%(proto)] [%(status)] [%(msecs)] [%(referer)] [%(uagent)]
log-maxsize = 100000000

memory-report = true

master = true
vacuum = true
need-app = true

chdir = __BK_HOME__/open_paas/apigw
module = api_gateway.wsgi:application
env=BK_ENV=production
env=PAAS_LOGGING_DIR=__BK_HOME__/logs/open_paas
env=DJANGO_SETTINGS_MODULE=api_gateway.configs.open.prod

http-timeout=600

cpu_cores = %k
workers = %(cpu_cores + cpu_cores)
gevent = 1000

buffer-size = 8192
post-buffering = 8192

max-requests = 10240
